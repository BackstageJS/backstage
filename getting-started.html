
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Getting started Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Getting started</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="getting-started">Getting started</h1>
<p>There are two components to Backstage: an Express server that hosts your branches, and a CLI client to deploy your apps. Let&apos;s start by setting up the server.</p>
<h2 id="the-server">The server</h2>
<p>A Backstage server instance is responsible for two things: handling deployments, and serving deployed packages. Both of these functions are managed by a storage backend -- an Express middleware that saves deployed packages to a specific location, and then serves them from that location when requested.</p>
<p>At the moment, Backstage ships with only one storage backed: a file system backend, which simply writes deployed packages to disk on the same machine as the Backstage server instance. In the future, additional storage backends (e.g., for integrating with Amazon S3) may be added.</p>
<p>To set up your Backstage server instance, you&apos;ll need to create a simple repo that imports and configures the Backstage app with the storage backend of your choice. First, install <code>backstage-server</code> as a dependency:</p>
<pre><code class="lang-bash">$ yarn add backstage-server
</code></pre>
<p>Or:</p>
<pre><code class="lang-bash">$ npm install --save backstage-server
</code></pre>
<p>Then, create an <code>app.js</code> file which will run your server instance. In this example, we&apos;ll use the file system backend:</p>
<pre><code class="lang-JavaScript"><span class="hljs-comment">// app.js</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>)
<span class="hljs-keyword">const</span> { backstage } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;backstage-server&apos;</span>)
<span class="hljs-keyword">const</span> { fileSystem } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;backstage-server/dist/storage-backends/file-system&apos;</span>)

<span class="hljs-keyword">const</span> app = backstage(fileSystem(path.join(__dirname, <span class="hljs-string">&apos;../files&apos;</span>)))

app.listen(<span class="hljs-number">3000</span>)
</code></pre>
<p>(Note: this example can be cloned from the <a href="https://github.com/jessepinho/backstage-example" target="_blank"><code>backstage-example</code> repo</a>.)</p>
<p>In this example, we import <code>backstage</code> from <code>backstage-server</code>. <code>backstage()</code> simply returns an instance of <code>Express</code>, which you can use just the same as if you&apos;d imported it from Express via <code>const app = require(&apos;express&apos;)()</code>. However, it&apos;s been configured in <code>backstage-server</code> to include <code>cookie-parser</code>, as well as middleware for the storage backend that you pass it.</p>
<p>Run your server via <code>node app.js</code>, and it&apos;s ready to start receiving deployments and serving your files!</p>
<h2 id="the-cli-client">The CLI client</h2>
<p>Use the CLI client to deploy your front-end apps to your Backstage server instance. First, install <code>backstage-cli</code> globally:</p>
<pre><code class="lang-bash">$ npm install -g backstage-cli
</code></pre>
<p>Next, <code>cd</code> into the directory of a front-end app you&apos;d like to deploy:</p>
<pre><code class="lang-bash">$ <span class="hljs-built_in">cd</span> ~/projects/my-react-app
</code></pre>
<p>Run <code>backstage init</code> to go through the configuration wizard. At the end, it will create a <code>.backstagerc</code> file in the root of your repo, which contains configuration for future deploys.</p>
<p>You&apos;re now ready to deploy! Build your app using whatever command you normally use (e.g., <code>npm run build</code>), then deploy your app to Backstage:</p>
<pre><code class="lang-bash">$ backstage deploy
</code></pre>
<p>By default, this will deploy to the app you named when you ran <code>backstage init</code>, and to a key equal to your current Git branch name. If you&apos;d rather use a different key than your Git branch name, use the <code>--key</code> option (<code>-k</code> for short):</p>
<pre><code class="lang-bash">$ backstage deploy --key myKey
</code></pre>
<p>Once the deploy has completed, Backstage will display a link you can use to access this specific deployment. Open it up, and your front-end app is ready to test!</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Getting started","level":"1.2","depth":1,"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"getting-started.md","mtime":"2018-02-18T22:04:45.783Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-02-19T08:08:59.163Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

